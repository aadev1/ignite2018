{
  "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "anInteger": {
      "type": "int",
      "defaultValue": 1,
      "minValue": 0,
      "maxValue": 10
    },
    "aString": {
      "type": "string",
      "defaultValue": "Yes",
      "allowedValues": [
        "Yes",
        "No",
        "Maybe"
      ]
    },
    "aSecureString": {
      "type": "securestring",
      "minLength": 12,
      "maxLength": 32,
      "metadata": {
        "description": "The password must be at leseast 12 chars and not more than 32"
      }
    },
    "anArray": {
      "type": "array",
      "defaultValue": [
        "a",
        "b",
        "c"
      ]
    },
    "aBool": {
      "type": "bool",
      "defaultValue": false
    },
    "anObject": {
      "type": "object",
      "defaultValue": {
        "foo": "bar",
        "niftyProperty": [
          1,
          2,
          3
        ]
      }
    },
    "aSecureObject": {
      "type": "secureObject",
      "metadata": {
        "description": "Since this is a secure object, it's contents will never be seen in logs",
        "btw": "you can put whatever you want in the metadata tag and ARM will ignore it"
      }
    },
    "aKeyVaultSecret": {
      "type": "securestring",
      "metadata": {
        "description": "the magic is in the parameters file, not the template file"
      }
    }
  },
  "variables": {
    "note": "variables can be used to construct and reuse complex expressions consisting of paramters, functions and literals",
    "expression": "[string('expressions are enclosed in brackets')]",
    "doubleInt": "[mul(parameters('anInteger'), 2)]",
    "connectionString": "[concat('Name=sa;Password=', parameters('aSecureString'))]",
    "vmPublicIpResourceId": "/subscriptions/ceaedbb7-b827-4195-b55f-de9b6732010b/resourceGroups/ExistingResources/providers/Microsoft.Network/publicIpAddresses/publicIpExisting",
    "vmPublicIpResourceId2": "[resourceId('ceaedbb7-b827-4195-b55f-de9b6732010b', 'ExistingResources', 'Microsoft.Network/publicIpAddresses', 'publicIpExisting')]",
    "subnetName": "Subnet",
    "virtualNetworkName": "MyVNET",
    "subnetRef": "[resourceId('Microsoft.Network/virtualNetworks/subnets/', variables('virtualNetworkName'), variables('subnetName'))]",
    "finalNote": "check out: https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-template-functions"
  },
  "resources": [],
  "outputs": {
    "vmPipFqdn": {
      "type": "string",
      "value": "[reference(variables('vmPublicIpResourceId2'), '2017-03-30').dnsSettings.fqdn]"
    },
    "allParams": {
      "type": "object",
      "value": {
        "theInt": "[parameters('anInteger')]",
        "theString": "[parameters('aString')]",
        "theSecureString": "[parameters('aSecureString')]",
        "theArray": "[parameters('anArray')]",
        "theBool": "[parameters('aBool')]",
        "theObject": "[parameters('anObject')]",
        "theSecureObject": "[parameters('aSecureObject')]"
      }
    },
    "allVars": {
      "type": "object",
      "value": {
        "theNote": "[variables('note')]",
        "theExpression": "[variables('expression')]",
        "thedoubleInt": "[variables('doubleInt')]",
        "theconnectionString": "[variables('connectionString')]",
        "theSubnetRef": "[variables('subnetRef')]",
        "theFinalNote": "[variables('finalNote')]"
      }
    }
  }
}